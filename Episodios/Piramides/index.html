<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i|Roboto+Slab:400,700&display=swap" rel="stylesheet">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link href="estilos.css" rel="stylesheet">
  <link href="lib/jquery-ui/jquery-ui.min.css" rel="stylesheet">
  <link href="lib/jquery-ui/jquery-ui.structure.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
  <script src="lib/smoothscrollto.jquery.js"></script>
  <script src="lib/jquery-ui/jquery-ui.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script type="text/javascript">
$( document ).ready(function() {

  var contadorGanadores = 0;
  var contadorPerdedores = 0;

  function agregarNivel(nivel, cantidad) {
    var targetMarginHoriz = {
      5: 3,
      6: 2,
      7: 1,
      8: 1,
      9: 1,
      10: 1
    }
    console.log('agregando nivel ' + nivel + ' (' + cantidad + ')');
    var $bloque = $("<div class='bloque nuevoBloque'" +
    "style='margin-top: 450px; margin-left: 20; margin-right: 20; opacity: 0'>" +
    "<div class='relleno' style='height: 100%; opacity: 1;'></div></div>");
    var $nuevoNivel = $(`<div class='nivel moving _fuego n${nivel}'></div>`);

    for (var i=1; i<=cantidad; i++) {
      $bloque.clone().appendTo($nuevoNivel);
    }
    $nuevoNivel.appendTo('.piramide');
    $('.nuevoBloque').delay(20).animate({
      'margin-bottom': 6, 'margin-top': 0,
      'margin-left': targetMarginHoriz[nivel],
      'margin-right': targetMarginHoriz[nivel],
      'opacity': 1
    }, 500, function() {
      $('.nuevoBloque').removeClass('nuevoBloque');
    });
  }

  function animarContador(actual, valor, $elemento) {
    return new Promise(function(resolve, reject) {
      console.log('Animando contador:', valor, $elemento);
      $({num: actual}).stop(true).animate({num: valor}, {
        duration : 2000,
        easing: "easeOutQuad",
        step: function () {
          var valor = parseInt(this.num);
          $elemento.text(valor);
        }
      }).promise().done(function () {
          $elemento.text(valor);
          return resolve();
      });
    });
  }

  function animarContadores(nivel, ganador) {
    console.log('anim contadores', nivel);
    var g, p;
    switch (nivel) {
      case 1:
      g=1;
      p=14-6;
      break;
      case 2:
      g=3;
      p=28-4;
      break;
      case 3:
      g=7;
      p=56;
      break;
      case 4:
      g=15;
      p=112;
      break;
      case 5:
      g=31;
      p=224;
      break;
      case 6:
      g=63;
      p=448;
      break;
    }
    if (ganador) {
      console.log('anim ganadores >', contadorGanadores, g);
      animarContador(contadorGanadores, g, $('.ganadoresNum')).then(function() {
        contadorGanadores = g;
      });
    } else {
      console.log('anim perdedores >', contadorPerdedores, p);
      animarContador(contadorPerdedores, p, $('.perdedoresNum')).then(function() {
        contadorPerdedores = p;
      });
    }
  }


  $.fn.animateRotate = function(angle, duration, easing, complete) {
    var args = $.speed(duration, easing, complete);
    var step = args.step;
    return this.each(function(i, e) {
      args.complete = $.proxy(args.complete, e);
      args.step = function(now) {
        $.style(e, 'transform', 'rotate(' + now + 'deg)');
        if (step) return step.apply(e, arguments);
      };

      $({deg: 0}).animate({deg: angle}, args);
    });
  };

  var defaultDelay = 300;
  var mapa = [];

  // Fase 1: Introduccion
  mapa = mapa.concat([
    {y: 0},   // 0
    {y: 300}, // 1
    {y: 400}, // 2
    {y: 550}, // 3
    {y: 600}, // 4
    {y: 830, delay: 1000},
    {animacion: 'emoji_amor'},
    {animacion: 'emoji_odio'},
    {animacion: 'emoji_pensando'},
    {y: 1760},
  ]);

  // Fase 2: Telar de la Abundancia
  mapa = mapa.concat([
    {y: 3150},
    {animacion: 'nombre2'},
    {animacion: 'nombre3'},
    {animacion: 'nombre4'},
    {animacion: 'nombre5'},
    {animacion: 'nombre6'},
    {y: 4140, delay: 1800, easing: 'easeOutQuart'},
    //{animacion: 'florParcial1'},
    //{animacion: 'florParcial2'},

    {animacion: 'ref_agua'},
    {animacion: 'flor1'},
    {animacion: 'ref_tierra'},
    {animacion: 'flor2'},
    {animacion: 'flor3'},
    {animacion: 'ref_aire'},
    {animacion: 'flor4'},
    {animacion: 'flor5'},
    {animacion: 'flor6'},
    {animacion: 'flor7'},
    {animacion: 'ref_fuego'},
    {animacion: 'highlight_fuego'},
    {animacion: 'all_fuego'},
    {animacion: 'mostrar_agua'},
    {animacion: 'transfer'},
    {animacion: 'mostrar_resto'},
    {animacion: 'agua_leave'},
    {animacion: 'split'},
    {animacion: 'split2'},
    {animacion: 'split3'},
    {animacion: 'split4play'},
    {y: 5250}
  ]);

  // Fase 3: Piramide
  mapa = mapa.concat([
    {animacion: 'piramide_inicial'},
    {animacion: 'piramide_dinero'},
    {animacion: 'piramide_transfer1'},
    {animacion: 'piramide_gana1'},
    {animacion: 'piramide_insert5'},
    {animacion: 'piramide_transfer2'},
    {animacion: 'piramide_gana2'},
    {animacion: 'piramide_insert6'},
    {animacion: 'piramide_transfer3'},
    {animacion: 'piramide_gana3'},
    {animacion: 'piramide_insert7'},
    {animacion: 'piramide_transfer4'},
    {animacion: 'piramide_gana4'},
    {animacion: 'piramide_insert8'},
    {animacion: 'piramide_transfer5'},
    {animacion: 'piramide_gana5'},
    {animacion: 'piramide_insert9'},
    {animacion: 'piramide_transfer6'},
    {animacion: 'piramide_gana6'},
  ]);


  // ESTAFA Definiciones
  // mapa = mapa.concat([3050+offset, 4540+offset, 5440+offset, 6240+offset]);

  // $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$
  var pos;
  // pos = 0; // <<<<< POSICION INICIAL!!! (default=0)
  // pos = 13; // flor
  pos = 38; // post-flor

  // Inicializacion
  console.log("Start!");
  $("HTML, BODY").animate({ scrollTop: mapa[pos].y }, 300);
  AOS.init();

  var nextPos = function() {
    pos++;
    if (pos > mapa.length) {
      $('.scrollDisplay').text(document.body.scrollTop + " / " + "FIN");
      return;
    }
    var easing = mapa[pos].easing || "linear";
    $('.scrollDisplay').text(document.body.scrollTop + " / " + pos);
    // scroll
    if (mapa[pos].y) {
      $("HTML, BODY").animate({ scrollTop: mapa[pos].y },
        mapa[pos].delay || defaultDelay, easing);
    }
    // animacion
    if (mapa[pos].animacion) {
      ejecutarAnimacion(mapa[pos].animacion);
    }
  };

  var posicionarPetalo = function(id, delay) {
    var fuegoUpDown_pushX = 72;
    var fuegoUpDown_pushY = 140;
    var fuegoLeftRight_pushX = 117;
    var fuegoLeftRight_pushY = 70;

    console.log('posicionando petalo:', id, delay);
    switch (id) {
      case 'tierra1':
      $('.tierra.p1')
      .position({
        my: "center top", at: "center center+50", of: $('.agua'),
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(0,    delay)
      ;
      break;
      case 'tierra2':
      $('.tierra.p2')
      .position({
        my: "center top", at: "center center-50", of: $('.agua'),
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180,  delay)
      ;
      break;
      case 'aire1':
      $('.aire.p1')
      .position({
        my: "center top", at: "center-60 center+58", of: $('.agua'),
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(60,     delay)
      ;
      break;
      case 'aire2':
      $('.aire.p2')
      .position({
        my: "center top", at: "center+60 center+58", of: $('.agua'),
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(-60,    delay)
      ;
      break;
      case 'aire3':
      $('.aire.p3')
      .position({
        my: "center top", at: "center+60 center-58", of: $('.agua'),
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180+60, delay)
      ;
      break;
      case 'aire4':
      $('.aire.p4')
      .position({
        my: "center top", at: "center-60 center-58", of: $('.agua'),
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180-60, delay)
      ;
      break;
      case 'fuego1':
      $('.fuego.p1')
      .position({
        my: "center top", of: $('.agua'),
        at: `center-${fuegoUpDown_pushX} center+${fuegoUpDown_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(20,    delay)
      ;
      break;
      case 'fuego2':
      $('.fuego.p2')
      .position({
        my: "center top", of: $('.agua'),
        at: `center-${fuegoLeftRight_pushX} center+${fuegoLeftRight_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(75,    delay)
      ;
      break;
      case 'fuego3':
      $('.fuego.p3')
      .position({
        my: "center top", of: $('.agua'),
        at: `center+${fuegoUpDown_pushX} center+${fuegoUpDown_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(-20,   delay)
      ;
      break;
      case 'fuego4':
      $('.fuego.p4')
      .position({
        my: "center top", of: $('.agua'),
        at: `center+${fuegoLeftRight_pushX} center+${fuegoLeftRight_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(-75,   delay)
      ;
      break;
      case 'fuego5':
      $('.fuego.p5')
      .position({
        my: "center top", of: $('.agua'),
        at: `center+${fuegoUpDown_pushX} center-${fuegoUpDown_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180+20,   delay)
      ;
      break;
      case 'fuego6':
      $('.fuego.p6')
      .position({
        my: "center top", of: $('.agua'),
        at: `center+${fuegoLeftRight_pushX} center-${fuegoLeftRight_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180+75,   delay)
      ;
      break;
      case 'fuego7':
      $('.fuego.p7')
      .position({
        my: "center top", of: $('.agua'),
        at: `center-${fuegoUpDown_pushX} center-${fuegoUpDown_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180-20,   delay)
      ;
      break;
      case 'fuego8':
      $('.fuego.p8')
      .position({
        my: "center top", of: $('.agua'),
        at: `center-${fuegoLeftRight_pushX} center-${fuegoLeftRight_pushY}`,
        using: function(css, calc) { $(this).animate(css, delay, "linear"); }
      })
      .animateRotate(180-75,   delay)
      ;
      break;
    }
  };

  var ejecutarAnimacion = function(id) {
    console.log('ejecutando animacion:', id);
    var genericDelay = 600;

    switch(id) {
      case 'emoji_amor':
      $('.emoji_amor').animate({opacity: 1});
      break;

      case 'emoji_odio':
      $('.emoji_odio').animate({opacity: 1});
      break;

      case 'emoji_pensando':
      $('.emoji_pensando').animate({opacity: 1});
      break;

      case 'florParcial1':
      posicionarPetalo('tierra1', genericDelay);
      posicionarPetalo('tierra2', genericDelay);
      posicionarPetalo('aire1', genericDelay);
      posicionarPetalo('aire2', genericDelay);
      posicionarPetalo('aire3', genericDelay);
      posicionarPetalo('aire4', genericDelay);
      break;

      case 'florParcial2':
      posicionarPetalo('fuego5', 500);
      posicionarPetalo('fuego6', 600);
      posicionarPetalo('fuego4', 700);
      posicionarPetalo('fuego3', 800);
      posicionarPetalo('fuego1', 900);
      posicionarPetalo('fuego2', 1000);
      posicionarPetalo('fuego8', 1100);
      posicionarPetalo('fuego7', 1200);
      break;

      case 'flor1':
      posicionarPetalo('tierra1', genericDelay);
      posicionarPetalo('tierra2', genericDelay);
      break;

      case 'flor2':
      posicionarPetalo('aire1', genericDelay);
      posicionarPetalo('aire2', genericDelay);
      break;

      case 'flor3':
      posicionarPetalo('aire3', genericDelay);
      posicionarPetalo('aire4', genericDelay);
      break;

      case 'flor4':
      posicionarPetalo('fuego1', genericDelay);
      posicionarPetalo('fuego2', genericDelay);
      break;

      case 'flor5':
      posicionarPetalo('fuego3', genericDelay);
      posicionarPetalo('fuego4', genericDelay);
      break;

      case 'flor6':
      posicionarPetalo('fuego5', genericDelay);
      posicionarPetalo('fuego6', genericDelay);
      break;

      case 'flor7':
      posicionarPetalo('fuego7', genericDelay);
      posicionarPetalo('fuego8', genericDelay);
      break;

      case 'ref_agua':
      $('.ref_agua').animate({opacity: '1'}, genericDelay);
      break;
      case 'ref_tierra':
      $('.ref_tierra').animate({opacity: '1'}, genericDelay);
      break;
      case 'ref_aire':
      $('.ref_aire').animate({opacity: '1'}, genericDelay);
      break;
      case 'ref_fuego':
      $('.ref_fuego').animate({opacity: '1'}, genericDelay);
      break;

      case 'ocultar_refs':
      $('.ref').animate({opacity: '0'}, genericDelay);
      break;
      case 'mostrar_refs':
      $('.ref').animate({opacity: '1'}, genericDelay);
      break;

      case 'highlight_fuego':
      $('.ref_aire').delay(0).animate({opacity: '0'}, 200);
      $('.ref_tierra').delay(0).animate({opacity: '0'}, 200);
      $('.ref_agua').delay(0).animate({opacity: '0'}, 200);

      $('.fuego.p6').delay(100).animate({opacity: '0'}, 200);
      $('.fuego.p4').delay(200).animate({opacity: '0'}, 200);
      $('.fuego.p3').delay(300).animate({opacity: '0'}, 200);
      $('.fuego.p1').delay(400).animate({opacity: '0'}, 200);
      $('.fuego.p2').delay(500).animate({opacity: '0'}, 200);
      $('.fuego.p8').delay(600).animate({opacity: '0'}, 200);
      $('.fuego.p7').delay(700).animate({opacity: '0'}, 200);

      $('.aire.p3').delay(800).animate({opacity: '0'}, 200);
      $('.aire.p2').delay(900).animate({opacity: '0'}, 200);
      $('.aire.p1').delay(1000).animate({opacity: '0'}, 200);
      $('.aire.p4').delay(1100).animate({opacity: '0'}, 200);

      $('.tierra.p2').delay(1200).animate({opacity: '0'}, 200);
      $('.tierra.p1').delay(1400).animate({opacity: '0'}, 200);

      $('.agua').delay(1600).animate({opacity: '0'}, 200);

      // fuego 5 cash 1
      $('.cash.c8').css({'margin-top': -241, 'margin-left': 87})
      .delay(2000)
      .animate({opacity: 1}, 400);

      $('.cash.c7').css({'margin-top': -118, 'margin-left': 185});
      $('.cash.c6').css({'margin-top': 68, 'margin-left': 194});
      $('.cash.c5').css({'margin-top': 207, 'margin-left': 81});
      $('.cash.c4').css({'margin-top': 211, 'margin-left': -94});
      $('.cash.c3').css({'margin-top': 113, 'margin-left': -188});
      $('.cash.c2').css({'margin-top': -54, 'margin-left': -191});
      $('.cash.c1').css({'margin-top': -163, 'margin-left': -87});

      break;

      case 'transfer':
      $('.cash.c1').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c2').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c3').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c4').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c5').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c6').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c7').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      $('.cash.c8').animate({'margin-top': 0, 'margin-left': 0}, 1000);
      break;

      case 'all_fuego':
      $('.fuego.p6').delay(100).animate({opacity: '1'}, 200);
      $('.cash.c7').delay(100).animate({opacity: '1'}, 200);

      $('.fuego.p4').delay(200).animate({opacity: '1'}, 200);
      $('.cash.c6').delay(200).animate({opacity: '1'}, 200);

      $('.fuego.p3').delay(300).animate({opacity: '1'}, 200);
      $('.cash.c5').delay(300).animate({opacity: '1'}, 200);

      $('.fuego.p1').delay(400).animate({opacity: '1'}, 200);
      $('.cash.c4').delay(400).animate({opacity: '1'}, 200);

      $('.fuego.p2').delay(500).animate({opacity: '1'}, 200);
      $('.cash.c3').delay(500).animate({opacity: '1'}, 200);

      $('.fuego.p8').delay(600).animate({opacity: '1'}, 200);
      $('.cash.c2').delay(600).animate({opacity: '1'}, 200);

      $('.fuego.p7').delay(700).animate({opacity: '1'}, 200);
      $('.cash.c1').delay(700).animate({opacity: '1'}, 200);
      break;

      case 'mostrar_agua':
      $('.agua').delay(0).animate({opacity: '1'}, 200);
      $('.ref_agua').delay(200).animate({opacity: '1'}, 200);
      break;

      case 'mostrar_resto':
      ejecutarAnimacion('ocultar_refs');
      $('.aire.p3').delay(200).animate({opacity: '1'}, 200);
      $('.aire.p2').delay(300).animate({opacity: '1'}, 200);
      $('.aire.p1').delay(400).animate({opacity: '1'}, 200);
      $('.aire.p4').delay(500).animate({opacity: '1'}, 200);
      $('.tierra.p2').delay(600).animate({opacity: '1'}, 200);
      $('.tierra.p1').delay(700).animate({opacity: '1'}, 200);
      break;

      case 'agua_leave':
      $('.agua').animate({
        left: "-=1500",
      }, 2000);
      $('.cash').animate({
        'margin-left': -1502
      }, 2000);
      break;

      case 'split':
      $('.tierra.p1').animate({ 'margin-top': "+=0", 'margin-left': "+=500" }, 1000);
      $('.aire.p1').animate({ 'margin-top': "+=0", 'margin-left': "+=500" }, 1000);
      $('.aire.p2').animate({ 'margin-top': "+=0" , 'margin-left': "+=500"}, 1000);
      $('.fuego.p1').animate({ 'margin-top': "+=0", 'margin-left': "+=500" }, 1000);
      $('.fuego.p2').animate({ 'margin-top': "+=0", 'margin-left': "+=500" }, 1000);
      $('.fuego.p3').animate({ 'margin-top': "+=0", 'margin-left': "+=500" }, 1000);
      $('.fuego.p4').animate({ 'margin-top': "+=0", 'margin-left': "+=500" }, 1000);

      $('.tierra.p2').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      $('.aire.p3').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      $('.aire.p4').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      $('.fuego.p5').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      $('.fuego.p6').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      $('.fuego.p7').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      $('.fuego.p8').animate({ 'margin-top': "-=50", 'margin-left': "-=500" }, 1000);
      break;

      case 'split2':
      $('.tierra.p1').each(function() {
        $(this).clone().addClass('agua').removeClass('tierra petalo')
          .css('opacity', 0).css('top', '50px').appendTo('.flor').animate({opacity: '1'}, 1000);
        $(this).delay(0).animate({top: '-=30'}, 1000, function() {
          $(this).remove();
        });
      });
      $('.tierra.p2').each(function() {
        $(this).clone().addClass('agua').removeClass('tierra petalo')
          .css('opacity', 0).css('top', '-130px').appendTo('.flor').animate({opacity: '1'}, 1000);
        $(this).delay(0).animate({top: '+=30'}, 1000, function() {
          $(this).remove();
        });
      });
      $('.aire').each(function() {
        $(this).clone().addClass('tierra').removeClass('aire')
          .css('opacity', 0).appendTo('.flor').animate({opacity: '1'}, 1000);
        $(this).delay(1000).animate({opacity: '0'}, 100, function() {
          $(this).remove();
        });
      });
      $('.fuego').each(function() {
        $(this).clone().addClass('aire').removeClass('fuego')
          .css('opacity', 0).appendTo('.flor').animate({opacity: '1'}, 1000);
        $(this).delay(1000).animate({opacity: '0'}, 100, function() {
          $(this).remove();
        });
      });
      break;

      case 'split3':
      $('.video1').fadeIn();
      $('.video2').fadeIn();
      break;

      case 'split4play':
        $('.video1')[0].play();
        $('.video2')[0].play();
      break;

      case 'florFull':
      var tierraDelay = 900;
      var aireDelay = 1600;
      var fuegoDelay = 2000;
      posicionarPetalo('tierra1', tierraDelay);
      posicionarPetalo('tierra2', tierraDelay);
      posicionarPetalo('aire1', aireDelay);
      posicionarPetalo('aire2', aireDelay);
      posicionarPetalo('aire3', aireDelay);
      posicionarPetalo('aire4', aireDelay);
      posicionarPetalo('fuego1', fuegoDelay);
      posicionarPetalo('fuego2', fuegoDelay);
      posicionarPetalo('fuego3', fuegoDelay);
      posicionarPetalo('fuego4', fuegoDelay);
      posicionarPetalo('fuego5', fuegoDelay);
      posicionarPetalo('fuego6', fuegoDelay);
      posicionarPetalo('fuego7', fuegoDelay);
      posicionarPetalo('fuego8', fuegoDelay);
      break;

      case 'nombre2':
      $('.nombre.n1').animate({'top': -700});
      $('.nombre.n2').css({'top': '+=700', 'display': 'block'}).animate({'top': '-=700'});
      break;

      case 'nombre3':
      $('.nombre.n2 .align-right').animate({'top': -700});
      $('.nombre.n3').css({'top': '+=700', 'display': 'block'}).animate({'top': '-=700'});
      break;
      case 'nombre4':
      $('.nombre.n3 .align-right').animate({'top': -700});
      $('.nombre.n4').css({'top': '+=700', 'display': 'block'}).animate({'top': '-=700'});
      break;
      case 'nombre5':
      $('.nombre.n4 .align-right').animate({'top': -700});
      $('.nombre.n5').css({'top': '+=700', 'display': 'block'}).animate({'top': '-=700'});
      break;
      case 'nombre6':
      $('.nombre.n2 .red').animate({'top': -700});
      $('.nombre.n6').css({'top': '+=700', 'display': 'block'}).animate({'top': '-=700'});
      break;

      case 'piramide_inicial':
      $('.piramide').animate({opacity: 1}, 500);
      break;

      case 'piramide_dinero':
      $('.piramide').addClass('vizMoney', 1000);
      $('.relleno').animate({opacity: 1}), 1000;
      break;

      case 'piramide_transfer1':
      $('.n1 .relleno').animate({'height': '100%'}, 2000, 'easeOutQuart');
      $('.n4 .relleno').animate({'height': '0%'}, 2000, 'easeOutQuart');
      $('.contadores .perdedores').animate({'opacity': 1}, 800); // inicializamos contador de perdedores
      animarContadores(1, false);
      break;

      case 'piramide_gana1':
      $('.piramide').animate({'margin-top': '-=100'}, 1000, 'easeOutQuart');
      $('.n1').addClass('ganadores', 500, function() {
        $('.n1 .bloque').animate({'top': -200, 'left': -900});
      });
      $('.contadores .ganadores').animate({'opacity': 1}, 800); // inicializamos contador de ganadores
      animarContadores(1, true);
      break;

      case 'piramide_insert5':
      agregarNivel(5, 16);
      break;

      case 'piramide_transfer2':
      $('.n2 .relleno').animate({'height': '100%'}, 2000, 'easeOutQuart');
      $('.n5 .relleno').animate({'height': '0%'}, 2000, 'easeOutQuart');
      animarContadores(2, false);
      break;

      case 'piramide_gana2':
      $('.n2').addClass('ganadores', 500, function() {
        $('.n2 .bloque').animate({'top': -246, 'left': -861});
      });
      animarContadores(2, true);
      break;

      case 'piramide_insert6':
      agregarNivel(6, 32);
      break;

      case 'piramide_transfer3':
      $('.n3 .relleno').animate({'height': '100%'}, 2000, 'easeOutQuart');
      $('.n6 .relleno').animate({'height': '0%'}, 2000, 'easeOutQuart');
      animarContadores(3, false);
      break;

      case 'piramide_gana3':
      $('.n3').addClass('ganadores', 500, function() {
        $('.n3 .bloque').animate({'top': -292, 'left': -783});
      });
      animarContadores(3, true);
      break;

      case 'piramide_insert7':
      agregarNivel(7, 64);
      break;

      case 'piramide_transfer4':
      $('.n4 .relleno').animate({'height': '100%'}, 2000, 'easeOutQuart');
      $('.n7 .relleno').animate({'height': '0%'}, 2000, 'easeOutQuart');
      animarContadores(4, false);
      break;

      case 'piramide_gana4':
      $('.n4').addClass('ganadores', 500, function() {
        $('.n4 .bloque').animate({'top': -338, 'left': -627});
      });
      animarContadores(4, true);
      break;

      case 'piramide_insert8':
      agregarNivel(8, 128);
      break;

      case 'piramide_transfer5':
      $('.n5 .relleno').animate({'height': '100%'}, 2000, 'easeOutQuart');
      $('.n8 .relleno').animate({'height': '0%'}, 2000, 'easeOutQuart');
      animarContadores(5, false);
      break;

      case 'piramide_gana5':
      $('.n5').addClass('ganadores', 500, function() {
        $('.n5 .bloque').animate({'top': -384, 'left': -315});
      });
      animarContadores(5, true);
      break;

      case 'piramide_insert9':
      agregarNivel(9, 256);
      break;

      case 'piramide_transfer6':
      $('.n6 .relleno').animate({'height': '100%'}, 2000, 'easeOutQuart');
      $('.n9 .relleno').animate({'height': '0%'}, 2000, 'easeOutQuart');
      animarContadores(6, false);
      break;

      case 'piramide_gana6':
      $('.n6').addClass('ganadores', 500, function() {
        $('.n6 .bloque').animate({'top': -430, 'left': 278});
      });
      animarContadores(6, true);
      break;

    }
  };

  window.onscroll = function() {
    $('.scrollDisplay').text(document.body.scrollTop + " / " + pos);
  };
  $('body').mousedown(function(ev) {
    if (ev.which === 3) {
      nextPos();
    }
  });
});
</script>
</head>
<body class="noselect" oncontextmenu="return false">
  <div class="scrollDisplay">0</div>

  <!-- ............. COMIENZO ............. -->
  <div class="spacer-600"> </div>
  <h1 data-aos-anchor-placement="center-center"  data-aos="flip-down">
    ¡Hola!
  </h1>
  <h2 data-aos-anchor-placement="center-center"  data-aos="flip-down">
    Vengo a ofrecerte información
  </h2>
  <h2 data-aos-anchor-placement="center-center"  data-aos="flip-down">
    <span>clara</span> e <span>imparcial</span>
  </h2>
  <h2 data-aos-anchor-placement="center-center"  data-aos="flip-down">
    sobre el <span>Telar de la Abundancia</span>
  </h2>
  <div class="spacer-25"></div>

  <!-- ............. BLACK ............. -->
  <div class="black-bg">

    <!-- ............. Thinking ............. -->
    <div class="spacer-50"></div>
    <div data-aos-anchor-placement="bottom-bottom" data-aos="fade-up">
      <div class="emoji_amor emoji_flotante">
      </div>
      <div class="emoji_odio emoji_flotante">
      </div>
      <img src="thinking.gif" class="emoji_pensando" />
    </div>

    <div class="spacer-500"> </div>
    <h2 data-aos-anchor-placement="center-center"  data-aos="flip-down">¿Qué es el <span>Telar de la Abundancia</span>?</h2>
    <div class="spacer-500"> </div>
  </div>

  <div class="spacer-700"> </div>
  <div class="spacer-50"> </div>
  <div class="nombres">
    <div class="nombre n1">
      <div class="align-right">Telar de&nbsp;</div>
      <div class="red">mujeres</div>
    </div>
    <div class="nombre n2">
      <div class="align-right">Telar de la&nbsp;</div>
      <div class="red">abundancia</div>
    </div>
    <div class="nombre n3">
      <div class="align-right">Mandala de la&nbsp;</div>
      <div class="red"></div>
    </div>
    <div class="nombre n4">
      <div class="align-right">Burbujas de la&nbsp;</div>
      <div class="red"></div>
    </div>
    <div class="nombre n5">
      <div class="align-right">Flor de la&nbsp;</div>
      <div class="red"></div>
    </div>
    <div class="nombre n6">
      <div class="align-right"></div>
      <div class="red">confianza</div>
    </div>
  </div>


  <div class="spacer-50"> </div>
  <div class="spacer-600"> </div>
  <div class="spacer-300"> </div>


<div class="flor">
  <div class="ref ref_agua">
    <div class="titulo">Agua</div>
    <div class="subtexto">Recibe todo el dinero recaudado</div>
  </div>
  <div class="ref ref_tierra">
    <div class="subtexto">Apoya y motiva al resto</div>
    <div class="titulo">Tierra</div>
  </div>
  <div class="ref ref_aire">
    <div class="titulo">Aire</div>
    <div class="subtexto">Recluta nuevos miembros</div>
  </div>
  <div class="ref ref_fuego">
    <div class="titulo">Fuego</div>
    <div class="subtexto">Pone dinero</div>
  </div>


  <div class="agua"></div>
  <div class="petalo tierra p1"></div>
  <div class="petalo tierra p2"></div>
  <div class="petalo aire p1"></div>
  <div class="petalo aire p2"></div>
  <div class="petalo aire p3"></div>
  <div class="petalo aire p4"></div>
  <div class="petalo fuego p1"></div>
  <div class="petalo fuego p2"></div>
  <div class="petalo fuego p3"></div>
  <div class="petalo fuego p4"></div>
  <div class="petalo fuego p5"></div>
  <div class="petalo fuego p6"></div>
  <div class="petalo fuego p7"></div>
  <div class="petalo fuego p8"></div>


  <div class="cash c1"> </div>
  <div class="cash c2"> </div>
  <div class="cash c3"> </div>
  <div class="cash c4"> </div>
  <div class="cash c5"> </div>
  <div class="cash c6"> </div>
  <div class="cash c7"> </div>
  <div class="cash c8"> </div>
</div>

<video class="video1">
  <source src="FLOR2.mp4" type="video/mp4">
</video>
<video class="video2">
  <source src="FLOR2.mp4" type="video/mp4">
</video>

  <div class="spacer-600"> </div>
  <div class="spacer-400"> </div>

  <div class="contadores">
    <div class="ganadores">recibieron $8000<span class="ganadoresNum">0</span></div>
    <div class="perdedores"><span class="perdedoresNum">0</span>regalaron $1000</div>
  </div>
  <div class="piramide">
    <div class="nivel _agua n1">
      <div class="bloque"><div class="relleno"></div></div>
    </div>
    <div class="nivel _tierra n2">
      <div class="bloque"><div class="relleno"></div></div><div class="bloque"><div class="relleno"></div></div>
    </div>
    <div class="nivel _aire n3">
      <div class="bloque"><div class="relleno"></div></div><div class="bloque"><div class="relleno"></div></div><div class="bloque"><div class="relleno"></div></div><div class="bloque"><div class="relleno"></div></div>
    </div>
    <div class="nivel _fuego n4">
      <div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div><div class="bloque">
        <div class="relleno"></div>
      </div>
    </div>
  </div>


  <!-- ............. WHITE AGAIN ............. -->
  <!-- ............. Fase ESTAFA ............. -->
  <div class="spacer-400"> </div>
  <div class="diccionario">
    <h1 data-aos-anchor-placement="center-center"  data-aos="flip-down"><span>estufa</span></h1>
    <h4 class="definicion"><em>f.</em>  Aparato que sirve para calentar espacios cerrados
      mediante la combustión de carbón, de leña, de gas o gracias a la energía eléctrica.</h4>
  </div>
  <div class="spacer-600"> </div>

  <div class="spacer-400"> </div>
  <div class="diccionario">
    <h1><span>estafa</span></h1>
    <h4 class="definicion"><em>(Der.)</em> Delito consistente en provocar un <span>perjuicio patrimonial</span> a
      alguien mediante engaño y con ánimo de lucro.</h4>
  </div>
  <div class="spacer-600"> </div>

  <h1>O SEA</h1>
  <div class="spacer-400"> </div>
  <div class="diccionario">
    <h1><span>estafa</span></h1>
    <h4 class="definicion">Chamuyar a alguien para que te regale guita.</h4>
  </div>

  <div class="spacer-600"> </div>
  <div class="spacer-600"> </div>
  <div class="spacer-600"> </div>
  <div class="spacer-600"> </div>

</body>
</html>
